Building the actual MOPS code (C++ stuff) went smoothly; I brought in
pre-compiled libraries instead of using Eups, etc, and made a hacked
makefile (see src/Makefile)

One hangup was gsl; the precompiled version + cblas + atlas I brought
were causing problems related to libgfortran.  I eventually got root
access and installed the GSL package.  My makefile still included
-lcblas which caused complaints; we eventually discovered that we
could replace it with -lgslcblas and everything magically worked.

Currently working on Milani stuff. The straight

./config -O gfortran;
make;


results in disaster.  I vaguely recall that his build system is broken
and that I had to build all the code myself.

it looks like src/orbfit has the stuff i need to build and a Makefile.
Running make fails with a complaint about no rule to build
../propag/orbit_elements.mod.  I go to ../propag and make, get a
complaint about no rule to build ../suit/something.  I go to ../suit
and make and get a Fortran error:

 In file fund_const.f90:13

INTEGER, PARAMETER :: qkind=KIND(1.0q0)
                                     1
 Internal Error at (1):
 gfc_validate_kind(): Got bad kind
make: *** [fund_const.o] Error 1


Hmm. Googling makes this sound like a fairly common bug with gfortran. Uh-oh.

I used the intel compilers instead and magically everything works!
Lesson learned.  when we ran orbit_server.x it complained about lack
of jpleph so I just copied that over.

I got the latest buildOrbitServerInput.py but it needs LSST daf_base
for TAI -> UTC conversion..  That's not available here so we just
subtract 35 seconds and call it a day instead.

We try to run orbit_server.x but I realize it was never built -
running make only builds orbfit.x, not orbit_server.x in the
src/panst/ directory.  I go there and do make but we get a bunch of
complaints about gfortran; I think it's trying to read .o files which
are stale, so I'm rming thise.

I run and get 

fortcom: Error: prelim_server.f90, line 8: This module file was not generated by any release of this compiler.   [DES_INTERFACES]

about a billion times. 

It looks like we need to make .o files but the makefile is broken, trying to build things in the wrong order.

make secret_tricks.o 
make global_options.o 

make ident_db.o
make (fails)
make fit_control.o
make
make orbit_norms.o 
make attribute_subs.o
make triangles.o
make
make ident_store.o
make
make sec_object.o
make
make known_ids.o
make tracklets_split.o
make
make fluke_detections.o
make

AND IT WORKS!




April 13
------------

We're now trying to build everything as the user mops (not myers) and
make sure it works.  copying ~/daymops_git over and recompiling is
fine, Milani needs to be recompiled from scratch due to the way it
"bakes in" the paths to the ephemeris files, including the user home
directory.

So, we need to config, remember to use Intel compilers:

./conf -O intel

ifort is already in my path, so let's try a make in orb401:
make clean ; make

That goes okay...

cd src/panst

make clean


